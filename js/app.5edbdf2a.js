(function(e){function t(t){for(var a,o,l=t[0],s=t[1],c=t[2],u=0,m=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(m.length)m.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,l=1;l<r.length;l++){var s=r[l];0!==i[s]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},i={app:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=s;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("8a23"),i=r.n(a);i.a},"1c8c":function(e,t,r){"use strict";var a=r("1f69"),i=r.n(a);i.a},"1f69":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("4de4"),r("4160"),r("b64b"),r("159b"),r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"ledger"}},[r("v-app-bar",{attrs:{app:"","clipped-left":"",color:"amber"}},[r("span",{staticClass:"title ml-3 mr-5"},[r("span",{staticClass:"font-weight-light"},[e._v("Mini Ledger")])]),r("v-spacer"),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("a",e._g({attrs:{href:".\\\\example\\\\bill.csv",rel:"nofollow noreferrer",download:""}},a),[e._v("bill.csv")]),r("span",{staticClass:"title ml-2 mr-2"}),r("a",e._g({attrs:{href:".\\\\example\\\\categories.csv",rel:"nofollow noreferrer",download:""}},a),[e._v("catagories.csv")])]}}])},[r("span",[e._v("example files")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({attrs:{icon:""},on:{click:function(t){e.uploadSheet=!0}}},a),[r("v-icon",[e._v("mdi-upload")])],1)]}}])},[r("span",[e._v("Upload Csv")])])],1),r("Notification"),r("v-content",[r("v-container",{staticClass:"grey lighten-4",attrs:{fluid:"","grid-list-xl":"","fill-height":""}},[r("WorkTable")],1),r("v-bottom-sheet",{attrs:{inset:""},model:{value:e.uploadSheet,callback:function(t){e.uploadSheet=t},expression:"uploadSheet"}},[r("v-sheet",{staticClass:"text-center",attrs:{height:"230px"}},[r("CsvUpload")],1)],1)],1)],1)},n=[],o=r("5530"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",[r("v-form",{ref:"uploadForm",attrs:{"lazy-validation":!0},model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({attrs:{id:"addToTable",loading:e.loading,color:"amber"},on:{click:function(t){return e.addToWorkTable()}}},a),[e._v("Add to Work Table")])]}}])},[e.isCategoryDataEmpty()?r("span",[e._v("Category file is required")]):e._e(),e.isBillDataEmpty()&&!e.isCategoryDataEmpty()?r("span",[e._v("Create a new ledger from category File")]):e._e(),e.isBillDataEmpty()||e.isCategoryDataEmpty()?e._e():r("span",[e._v("Upload migration data")])]),r("v-file-input",{attrs:{accept:".csv",id:"categoryFileInput","show-size":"",chips:"",rules:[function(e){return!!e||"Category file is Required"},function(e){return!e||e.size<1e4||"File size should be less than 10 kB!"}],label:"Select a category csv file",disabled:e.inputDisabled},on:{change:function(t){return e.addCategoryFile()}},model:{value:e.categoryFile,callback:function(t){e.categoryFile=t},expression:"categoryFile"}}),r("v-file-input",{attrs:{accept:".csv",id:"billFileInput","show-size":"",chips:"",rules:[function(e){return!e||e.size<2e6||"File size should be less than 2 MB!"}],label:"Select a bill csv file",disabled:e.inputDisabled},on:{change:function(t){return e.addBillFile()}},model:{value:e.billFile,callback:function(t){e.billFile=t},expression:"billFile"}})],1)],1)],1)],1)},s=[],c=(r("fb6a"),r("369b")),d=r.n(c),u=r("2f62"),m=r("5118"),v={name:"CsvUpload",data:function(){return{validForm:!0,billFile:null,categoryFile:null,billData:null,categoryData:null,loading:!1,inputDisabled:!1}},methods:Object(o["a"])(Object(o["a"])({},Object(u["b"])({addDataToLedger:"addDataToLedger",notify:"notify"})),{},{addBillFile:function(){var e=this;if(this.billFile){if(!this.$refs.uploadForm.validate())return;d.a.parse(this.billFile,{header:!0,skipEmptyLines:!0,encoding:"UTF-8",complete:function(t){e.billData=t.data,e.notify({text:"Bill file parse completed",color:"success"})},error:function(e,t,r,a){this.billFile=null,this.billData=null,this.notify({text:"Bill file parse error: "+a,color:"error"})}})}else this.clearBillData()},addCategoryFile:function(){var e=this;if(this.categoryFile){if(!this.$refs.uploadForm.validate())return;d.a.parse(this.categoryFile,{header:!0,encoding:"UTF-8",before:function(e,t){return{action:"abort",reason:"Some reason"}},complete:function(t){e.categoryData=t.data,e.notify({text:"Category File parse completed",color:"success"})},error:function(e,t,r,a){this.categoryFile=null,this.categoryData=null,this.notify({text:"Category File parse error: "+a,color:"error"})}})}else this.clearCategoryData()},addToWorkTable:function(){var e=this;if(this.$refs.uploadForm.validate()&&!this.isCategoryDataEmpty()){this.isBillDataEmpty()&&(this.billData=[]),this.loading=!0,this.inputDisabled=!0;var t=this.billData.slice(),r=this.categoryData.slice();this.addDataToLedger({csvBill:t,csvCategory:r}),Object(m["setTimeout"])((function(){e.notify({text:"Files upload successfully",color:"success"}),e.clearAll(),e.loading=!1,e.inputDisabled=!1}),500)}},isCategoryDataEmpty:function(){return!this.categoryData||this.categoryData.length<=0},isBillDataEmpty:function(){return!this.billData||this.billData.length<=0},clearBillData:function(){this.billFile=null,this.billData=null},clearCategoryData:function(){this.categoryFile=null,this.categoryData=null},clearAll:function(){this.$refs.uploadForm.reset(),this.clearBillData(),this.clearCategoryData()}})},f=v,g=r("2877"),h=r("6544"),p=r.n(h),b=r("8336"),y=r("a523"),I=r("23a7"),x=r("0e8f"),_=r("4bd4"),F=r("a722"),C=r("3a2f"),k=Object(g["a"])(f,l,s,!1,null,null,null),T=k.exports;p()(k,{VBtn:b["a"],VContainer:y["a"],VFileInput:I["a"],VFlex:x["a"],VForm:_["a"],VLayout:F["a"],VTooltip:C["a"]});var L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{wrap:""}},[e._l(e.tableLedgers,(function(t){return r("v-flex",{key:t.id,attrs:{sm12:"",xs12:"",md6:"",lg4:"","align-self-auto":""}},[r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(a){var i=a.hover;return[r("v-lazy",{attrs:{options:{threshold:.5},"min-height":200,transition:"fade-transition"},model:{value:e.isActiveArray[t.id],callback:function(r){e.$set(e.isActiveArray,t.id,r)},expression:"isActiveArray[ledger.id]"}},[r("v-card",{class:{"on-hover":i},attrs:{elevation:i?12:2,color:""}},[r("v-tabs",{attrs:{"fixed-tabs":"","background-color":"blue",dark:""},model:{value:e.tabArray[t.id],callback:function(r){e.$set(e.tabArray,t.id,r)},expression:"tabArray[ledger.id]"}},[r("v-tab",{key:"ledger"},[e._v("Bills")]),r("v-tab",{key:"balance"},[e._v("Balance")])],1),r("v-tabs-items",{model:{value:e.tabArray[t.id],callback:function(r){e.$set(e.tabArray,t.id,r)},expression:"tabArray[ledger.id]"}},[r("v-tab-item",{key:"ledger"},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableLedgerheaders(t.isSource),items:e.getTableLedgerByIdAndFilter({id:t.csvId,filters:t.filters}).bills},scopedSlots:e._u([{key:"item.time",fn:function(t){var a=t.item;return[r("span",[e._v(e._s(e._f("millisTimeFormat")(a.time)))])]}},{key:"item.category",fn:function(a){var i=a.item;return[r("span",[e._v(e._s(e._f("tableTypeNamePrefix")(e.tableCategoryFormat(i,t),i.type)))])]}},{key:"item.amount",fn:function(t){var a=t.item;return[r("span",[e._v(e._s(e._f("tableAmountFormat")(a.amount)))])]}},{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"amber"}},[r("v-toolbar-title",{staticStyle:{"min-width":"8%"}},[t.isSource?r("span",[e._v("#")]):r("v-icon",{},[e._v("mdi-source-fork")]),e._v(" "+e._s(t.csvId)+" ")],1),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e.getTableLedgerByIdAndFilter({id:t.csvId,filters:t.filters}).bills?r("div",{staticStyle:{height:"100%",width:"155px","margin-left":"12px",color:"white"}},[r("div",{staticStyle:{height:"50%"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-icon",e._g({attrs:{color:"white"}},a),[e._v("mdi-cash-plus")])]}}],null,!0)},[r("span",[e._v("Total Income")])]),r("span",{staticStyle:{float:"right"}},[e._v(e._s(e.$currency.locale.unitSymbol)+" "+e._s(e._f("tableAmountFormat")(e.getTableLedgerByIdAndFilter({id:t.csvId,filters:t.filters}).totalIncome)))])],1),r("div",{staticStyle:{height:"50%"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-icon",e._g({attrs:{color:"white"}},a),[e._v("mdi-cash-minus")])]}}],null,!0)},[r("span",[e._v("Total Expenses")])]),r("span",{staticStyle:{float:"right"}},[e._v(e._s(e.$currency.locale.unitSymbol)+" "+e._s(e._f("tableAmountFormat")(e.getTableLedgerByIdAndFilter({id:t.csvId,filters:t.filters}).totalExpenses)))])],1)]):e._e(),r("v-spacer"),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[r("v-btn",e._g({staticClass:"mb",attrs:{small:"",color:""},on:{click:function(r){return e.setFilter(t)}}},i),[e.ledgerFiltersApplied(t)?r("v-icon",{attrs:{color:"amber"}},[e._v("mdi-filter")]):r("v-icon",{attrs:{color:"amber"}},[e._v("mdi-filter-outline")])],1)]}}],null,!0)},[r("span",[e._v("Filter")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[r("v-btn",e._g({staticClass:"mb",attrs:{small:"",color:""},on:{click:function(r){return e.forkTableLedger({csvId:t.csvId,tableId:t.id,filters:t.filters})}}},i),[t.isSource?r("v-icon",{attrs:{color:"amber"}},[e._v("mdi-source-fork")]):r("v-icon",{attrs:{color:"amber"}},[e._v("mdi-content-copy")])],1)]}}],null,!0)},[r("span",[e._v("Copy")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[t.isSource?e._e():r("v-btn",e._g({staticClass:"mb",attrs:{small:"",color:""},on:{click:function(r){return e.removeLedger({id:t.id})}}},i),[r("v-icon",{attrs:{color:"amber"}},[e._v("mdi-trash-can-outline")])],1)]}}],null,!0)},[r("span",[e._v("Remove")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[t.isSource?r("v-btn",e._g({staticClass:"mb",attrs:{small:"",color:""},on:{click:function(r){return e.addItem(t)}}},i),[r("v-icon",{attrs:{color:"amber"}},[e._v("mdi-plus")])],1):e._e()]}}],null,!0)},[r("span",[e._v("Add")])])],1)]},proxy:!0},{key:"item.actions",fn:function(a){var i=a.item;return[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(r){return e.editItem(i,t)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(r){return e.deleteItem(i,t)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])]}}],null,!0)})],1),r("v-tab-item",{key:"balance"},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.getTableFilterLedgerPerCategory({id:t.csvId,filters:t.filters}).headers,items:e.getTableFilterLedgerPerCategory({id:t.csvId,filters:t.filters}).dataList},scopedSlots:e._u([e._l(e.getTableFilterLedgerPerCategory({id:t.csvId,filters:t.filters}).headers,(function(t,a){return{key:"item."+t.value,fn:function(i){var n=i.item;return["categories"!==t.text?r("div",{key:a},[e._v(" "+e._s(e._f("tableAmountFormat")(n[t.value]))+" ")]):e._e()]}}})),{key:"item.category",fn:function(a){var i=a.item;return[r("span",[e._v(e._s(e._f("tableTypeNamePrefix")(e.tableCategoryFormat(i,t),i.type)))])]}},{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"amber"}},[r("v-toolbar-title",{staticStyle:{"min-width":"8%"}},[t.isSource?r("span",[e._v("#")]):r("v-icon",{},[e._v("mdi-source-fork")]),e._v(" "+e._s(t.csvId)+" ")],1),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),r("v-spacer"),r("v-chip",{staticClass:"ma-2",attrs:{color:"amber","text-color":"white",label:""}},[e._v("Unit: "+e._s(e.$currency.locale.currencyCode))]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[t.isSource?r("v-btn",e._g({staticClass:"mb",attrs:{small:"",color:""},on:{click:function(r){return e.removeAllLedgerConfirm(t.csvId)}}},i),[r("v-icon",{attrs:{color:"amber"}},[e._v("mdi-trash-can")])],1):e._e()]}}],null,!0)},[r("span",[e._v("Remove All")])])],1)]},proxy:!0}],null,!0)})],1)],1)],1)],1)]}}],null,!0)})],1)})),r("Confirm",{ref:"confirm"}),r("v-dialog",{attrs:{"max-width":"500px","retain-focus":!1},model:{value:e.dialogItem,callback:function(t){e.dialogItem=t},expression:"dialogItem"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Bill Item")])]),r("v-card-text",[r("v-form",{ref:"editedItemForm",attrs:{"lazy-validation":!0},model:{value:e.validEditedItem,callback:function(t){e.validEditedItem=t},expression:"validEditedItem"}},[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{disabled:"",value:e._f("millisTimeFormat")(e.editedItem.time),label:"Time"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{items:e.typeTable,"item-text":"name","item-value":"id",label:"Type","persistent-hint":"","single-line":"",rules:[function(e){return!!e||"Type is required"}],required:""},model:{value:e.editedItem.type,callback:function(t){e.$set(e.editedItem,"type",t)},expression:"editedItem.type"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{items:e.categoryTable({id:e.ledgerCsvId}).filter((function(t){return t.type===e.editedItem.type})),"item-text":"name","item-value":"id",label:"Category","persistent-hint":"","single-line":"",clearable:""},model:{value:e.editedItem.category,callback:function(t){e.$set(e.editedItem,"category",t)},expression:"editedItem.category"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{prefix:e.$currency.locale.unitSymbol,step:"0.01",type:"number",min:"-99999999",max:"99999999",label:"Amount",rules:[function(e){return!!e||"Amount should be a number"},function(e){return e>0||e<0||"Amount should not be zero"},function(e){return e>=-99999999||"Amount should be above -99999999"},function(t){return!e.editedItem.type||"0"!==e.editedItem.type||t<0||"Amount should be negative for expenses"},function(e){return e<=99999999||"Amount should not be above 99999999"},function(e){return(e+"").match(/^-?\d*(\.\d{1,2})?$/)||"Amount should be with at most 2 decimal digits"}],required:""},model:{value:e.editedItem.amount,callback:function(t){e.$set(e.editedItem,"amount",t)},expression:"editedItem.amount"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"amber",text:""},on:{click:e.closeItemDialog}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"amber",text:"",loading:e.itemSaveLoading},on:{click:e.saveItem}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px","retain-focus":!1},model:{value:e.dialogFilter,callback:function(t){e.dialogFilter=t},expression:"dialogFilter"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Filters")])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-text-field",e._g({attrs:{label:"Picker months",readonly:""},model:{value:e.editedFilter.months,callback:function(t){e.$set(e.editedFilter,"months",t)},expression:"editedFilter.months"}},a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-date-picker",{attrs:{"allowed-dates":e.allowMonths({id:e.ledgerCsvId}),type:"month",multiple:""},model:{value:e.editedFilter.months,callback:function(t){e.$set(e.editedFilter,"months",t)},expression:"editedFilter.months"}})],1)],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{items:e.categoryTable({id:e.ledgerCsvId}),"item-text":"name","item-value":"id",label:"Category",multiple:"",clearable:"","single-line":""},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,i=t.index;return[i<=1?r("v-chip",[r("span",[e._v(e._s(a.name))])]):e._e(),2===i?r("span",{staticClass:"grey--text caption"},[e._v("(+"+e._s(e.editedFilter.categories.length-2)+" others)")]):e._e()]}}]),model:{value:e.editedFilter.categories,callback:function(t){e.$set(e.editedFilter,"categories",t)},expression:"editedFilter.categories"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"amber",text:""},on:{click:function(t){return e.clearFiler()}}},[e._v("Clear")]),r("v-btn",{attrs:{color:"amber",text:""},on:{click:function(t){return e.closeFilterDialog()}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"amber",text:""},on:{click:function(t){return e.saveFilterItem()}}},[e._v("Set")])],1)],1)],1),r("v-fab-transition",[r("v-btn",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onScroll,expression:"onScroll"},{name:"show",rawName:"v-show",value:e.returnTop,expression:"returnTop"}],attrs:{fab:"",fixed:"",bottom:"",right:"",color:"amber"},on:{click:e.toTop}},[r("v-icon",{attrs:{color:"white"}},[e._v("mdi-chevron-up")])],1)],1),!e.tableLedgers||e.tableLedgers.length<=0?r("v-row",{attrs:{justify:"center",align:"center"}},[r("v-chip",{attrs:{large:"",ripple:!1,link:""}},[e._v("WORK TABLE")])],1):e._e()],2)},S=[],B=(r("c975"),r("d3b7"),r("25f0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{"max-width":"500px","retain-focus":!1},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[r("v-card",[e.title?r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.title))])]):e._e(),r("v-card-text",{staticClass:"pa-8"},[e._v(e._s(e.message))]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"amber",text:""},on:{click:e.cancel}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"amber",text:""},on:{click:e.confirm}},[e._v("Confirm")])],1)],1)],1)}),w=[],A={name:"Confirm",data:function(){return{isShow:!1,resolve:null,reject:null,message:null,title:null}},methods:{openDialog:function(e){var t=this,r=e.message,a=void 0===r?"Do you confirm?":r,i=e.title,n=void 0===i?null:i;return this.isShow=!0,this.title=n,this.message=a,new Promise((function(e,r){t.resolve=e,t.reject=r}))},confirm:function(){this.resolve(!0),this.isShow=!1},cancel:function(){this.resolve(!1),this.isShow=!1}}},D=A,V=r("b0af"),O=r("99d9"),j=r("169a"),E=r("2fa4"),$=Object(g["a"])(D,B,w,!1,null,null,null),Q=$.exports;p()($,{VBtn:b["a"],VCard:V["a"],VCardActions:O["a"],VCardText:O["b"],VCardTitle:O["c"],VDialog:j["a"],VSpacer:E["a"]});var P={name:"WorkTable",components:{Confirm:Q},computed:Object(o["a"])({},Object(u["c"])({tableLedgers:"tableLedgers",getTableLedgerByIdAndFilter:"getTableLedgerByIdAndFilter",getCsvLedgerIndex:"getCsvLedgerIndex",getCategoryNameById:"getCategoryNameById",categoryTable:"categoryTable",getTableFilterLedgerPerCategory:"getTableFilterLedgerPerCategory",getMonthkeys:"getMonthkeys",tableCounter:"tableCounter"})),watch:{dialogItem:function(e){e||this.closeItemDialog()},dialogFilter:function(e){e||this.closeFilterDialog()},tabArray:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e<this.tableCounter&&(tabArray[this.tableCounter]="ledger")})),isActiveArray:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e<this.tableCounter&&(isActiveArray[this.tableCounter]=!1)}))},data:function(){var e=this.$currency.locale.unitSymbol;return{isActiveArray:[],tab:"",tabArray:[],returnTop:!1,headersCommon:[{text:"Time",value:"time",align:"start",width:70},{text:"Categories",value:"category"},{text:"Amount("+e+")",value:"amount",width:110,align:"end"},{text:"Actions",value:"actions",width:80,sortable:!1}],editedIndex:-1,ledgerId:-1,ledgerCsvId:-1,itemSaveLoading:!1,validEditedItem:!0,dialogItem:!1,typeTable:[{id:"0",name:"支出"},{id:"1",name:"收入"}],editedItem:{time:null,type:"0",category:"",amount:0},defaultItem:{time:null,type:"0",category:"",amount:0},dialogFilter:!1,editedFilter:{months:[],categories:[]},defaultFilter:{months:[],categories:[]},menu:!1}},methods:Object(o["a"])(Object(o["a"])({},Object(u["b"])({editBillItem:"editBillItem",deleteBillItem:"deleteBillItem",addBillItem:"addBillItem",applyLedgerFilter:"applyLedgerFilter",forkTableLedger:"forkTableLedger",removeAllLedger:"removeAllLedger",removeLedger:"removeLedger"})),{},{tableLedgerheaders:function(e){return e?this.headersCommon:this.headersCommon.slice(0,-1)},toTop:function(){this.$vuetify.goTo(0)},onScroll:function(e){if("undefined"!==typeof window){var t=window.pageYOffset||e.target.scrollTop||0;this.returnTop=t>30}},removeAllLedgerConfirm:function(e){var t=this;this.$refs.confirm.openDialog({message:"Are you sure you want to delete all ledgers?"}).then((function(r){r&&t.removeAllLedger({csvId:e})}))},tableCategoryFormat:function(e,t){return this.getCategoryNameById({categoryId:e.category,id:t.csvId})},tabShow:function(e,t){this.tabArray[t]=e},clearFiler:function(){this.editedFilter=Object.assign({},this.defaultFilter)},setFilter:function(e){this.dialogFilter=!0,this.ledgerId=e.id,this.ledgerCsvId=e.csvId,this.editedFilter=Object.assign({},e.filters)},ledgerFiltersApplied:function(e){return!!(e.filters.months&&e.filters.months.length>0||e.filters.categories&&e.filters.categories.length>0)},allowMonths:function(e){var t=this.getMonthkeys(e);return function(e){return t.indexOf(e)>=0}},closeFilterDialog:function(){var e=this;this.dialogFilter=!1,this.$nextTick((function(){e.clearFiler(),e.ledgerId=-1}))},saveFilterItem:function(){this.ledgerId&&this.applyLedgerFilter({id:this.ledgerId,filters:this.editedFilter}),this.closeFilterDialog()},editItem:function(e,t){this.ledgerCsvId=t.csvId,this.editedIndex=this.getCsvLedgerIndex({csvId:t.csvId,item:e}),this.editedItem=Object.assign({},e),this.editedItem.amount=this.$currency.parseFloatAmount(this.editedItem.amount),this.dialogItem=!0},deleteItem:function(e,t){var r=this,a=this.getCsvLedgerIndex({csvId:t.csvId,item:e});this.$refs.confirm.openDialog({message:"Are you sure you want to delete this item?"}).then((function(e){e&&r.deleteBillItem({id:t.csvId,index:a})}))},addItem:function(e){this.editedItem=Object.assign({},this.defaultItem),this.editedItem.amount=this.$currency.parseFloatAmount(this.editedItem.amount),this.ledgerCsvId=e.csvId,this.editedItem.time=Date.now(),this.dialogItem=!0},closeItemDialog:function(){var e=this;this.dialogItem=!1,this.itemSaveLoading=!1,this.$nextTick((function(){e.editedIndex=-1,e.ledgerCsvId=-1,e.$refs.editedItemForm.reset()}))},saveItem:function(){this.$refs.editedItemForm.validate()&&(this.itemSaveLoading=!0,this.editedItem.category||("0"===this.editedItem.type?this.editedItem.category="others-out":this.editedItem.category="others-in"),this.editedItem.amount=this.$currency.parseIntAmount(this.editedItem.amount),this.editedIndex>-1?this.editBillItem({id:this.ledgerCsvId,editedIndex:this.editedIndex,item:this.editedItem}):this.addBillItem({id:this.ledgerCsvId,item:this.editedItem}),this.closeItemDialog())}})},M=P,N=(r("1c8c"),r("cc20")),z=r("62ad"),K=r("8fea"),q=r("2e4b"),R=r("ce7e"),U=r("0789"),W=r("ce87"),H=r("132d"),G=r("b687"),J=r("e449"),Y=r("0fd9"),X=r("b974"),Z=r("71a3"),ee=r("c671"),te=r("fe57"),re=r("aac8"),ae=r("8654"),ie=r("71d9"),ne=r("2a7f"),oe=r("269a"),le=r.n(oe),se=r("f977"),ce=Object(g["a"])(M,L,S,!1,null,"25f5cf82",null),de=ce.exports;p()(ce,{VBtn:b["a"],VCard:V["a"],VCardActions:O["a"],VCardText:O["b"],VCardTitle:O["c"],VChip:N["a"],VCol:z["a"],VContainer:y["a"],VDataTable:K["a"],VDatePicker:q["a"],VDialog:j["a"],VDivider:R["a"],VFabTransition:U["c"],VFlex:x["a"],VForm:_["a"],VHover:W["a"],VIcon:H["a"],VLayout:F["a"],VLazy:G["a"],VMenu:J["a"],VRow:Y["a"],VSelect:X["a"],VSpacer:E["a"],VTab:Z["a"],VTabItem:ee["a"],VTabs:te["a"],VTabsItems:re["a"],VTextField:ae["a"],VToolbar:ie["a"],VToolbarTitle:ne["a"],VTooltip:C["a"]}),le()(ce,{Scroll:se["b"]});var ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.snackBarQue,(function(t){return r("div",{key:t.id,attrs:{id:"snackbars"}},[r("v-snackbar",{attrs:{color:t.color,right:"",timeout:3e3},model:{value:t.isShow,callback:function(r){e.$set(t,"isShow",r)},expression:"item.isShow"}},[e._v(" "+e._s(t.text)+" "),r("v-btn",{attrs:{dark:"",text:""},on:{click:function(r){return e.notificationHide({id:t.id})}}},[e._v("Close")])],1)],1)})),0)},me=[],ve={name:"Notification",computed:Object(o["a"])({},Object(u["c"])({snackBarQue:"snackBarQue"})),methods:Object(o["a"])({},Object(u["b"])({notificationHide:"notificationHide"}))},fe=ve,ge=r("2db4"),he=Object(g["a"])(fe,ue,me,!1,null,null,null),pe=he.exports;p()(he,{VBtn:b["a"],VSnackbar:ge["a"]});var be={props:{source:String},components:{CsvUpload:T,WorkTable:de,Notification:pe},data:function(){return{uploadSheet:!1}},mounted:function(){var e=[{type:"0",time:"1561910400000",category:"27wquwjnsa",amount:"-10000"},{type:"0",time:"1561910400000",category:"27wquwjnsa",amount:"-900.01"},{type:"0",time:"1561910400000",category:"328jka9aslss",amount:"100.01"},{type:"1",time:"1577345638784",category:"",amount:"2000.012"}],t=[{id:"27wquwjnsa",type:"0",name:"Maintenance"},{id:"328jka9aslss",type:"0",name:"Food"}];this.addDataToLedger({csvBill:e,csvCategory:t})},methods:Object(o["a"])({},Object(u["b"])({addDataToLedger:"addDataToLedger"}))},ye=be,Ie=(r("034f"),r("7496")),xe=r("40dc"),_e=r("288c"),Fe=r("a75b"),Ce=r("8dd9"),ke=Object(g["a"])(ye,i,n,!1,null,null,null),Te=ke.exports;p()(ke,{VApp:Ie["a"],VAppBar:xe["a"],VBottomSheet:_e["a"],VBtn:b["a"],VContainer:y["a"],VContent:Fe["a"],VIcon:H["a"],VSheet:Ce["a"],VSpacer:E["a"],VTooltip:C["a"]});r("a623"),r("7db0"),r("c740"),r("d81d"),r("45fc"),r("a434"),r("b0c0"),r("4c53");var Le=r("ade3"),Se=(r("b680"),r("5ea9")),Be={unitSymbol:"¥",currencyCode:"CNY",code:"zh-CN",precision:2},we={parseIntAmount:function(e){return parseInt(100*e)},add:function(e,t){return e+t},sub:function(e,t){return e-t},intAmountFormat:function(e){return e?Object(Se["a"])({amount:e}).toFormat("0.00"):e},parseFloatAmount:function(e){return parseFloat(e/100).toFixed(Be.precision)},locale:Be};function Ae(e){var t=[];return e.months&&e.months.length>0&&t.push((function(t){return e.months.indexOf(t.monthKey)>=0})),e.categories&&e.categories.length>0&&t.push((function(t){return e.categories.indexOf(t.category)>=0})),t}function De(e,t){return t+"-"+("0"+e).slice(-2)}function Ve(e,t){return e.csvLedgers.find((function(e){return e.id===t}))}function Oe(e,t){return t.every((function(t){return t(e)}))}function je(e){var t=new Date(parseInt(e.time));e.month=t.toLocaleDateString("en",{month:"numeric"}),e.year=t.toLocaleDateString("en",{year:"numeric"}),e.monthKey=De(e.month,e.year)}a["a"].use(u["a"]);var Ee=new u["a"].Store({state:{csvLedgers:[],tableLedgers:[],counters:{csvId:0,tableId:0},snackBarQue:[{id:"1",text:"Greetings!",color:"info",isShow:!0}]},getters:{tableCounter:function(e){return e.counters.tableId},tableLedgers:function(e){return e.tableLedgers},snackBarQue:function(e){return e.snackBarQue},getTableLedgerByIdAndFilter:function(e){return function(t){var r=t.id,a=t.filters,i=[];if(!e.csvLedgers&&e.csvLedgers.length<=0)return i;var n=Ve(e,r);if(!n)return i;if(!a)return i;var o=Object.assign({},a),l=Ae(o);i=n.bill.filter((function(e){return Oe(e,l)}));var s=we.parseIntAmount(0),c=we.parseIntAmount(0);return i.forEach((function(e){"0"==e.type?c=we.add(c,e.amount):s=we.add(s,e.amount)})),{bills:i,totalExpenses:c,totalIncome:s}}},getTableFilterLedgerPerMonth:function(e){return function(t){var r=t.id,a=t.filters,i=[];if(!e.csvLedgers&&e.csvLedgers.length<=0)return i;var n=Ve(e,r);if(!n)return i;i=a&&a.months?a.months.slice():n.monthTable.slice();var o=Object.assign({},a),l=Ae(o);return n.bill.forEach((function(e){if(Oe(e,l)){var t=i.findIndex((function(t){return t.year===e.year&&t.month===e.month}));if(i[t].category){var r=i[t].category.findIndex((function(t){return t.category===e.category}));r>=0?i[t].category[r].amount=we.add(i[t].category[r].amount,e.amount):i[t].category.push({category:e.category,amount:e.amount,type:e.type})}else i[t].category=[],i[t].category.push({category:e.category,amount:e.amount,type:e.type})}})),i}},getTableFilterLedgerPerCategory:function(e){return function(t){var r=t.id,a=t.filters,i=[],n=[];if(!e.csvLedgers&&e.csvLedgers.length<=0)return{dataList:i,headers:n};var o=Ve(e,r);if(!o)return{dataList:i,headers:n};n.push({text:"Categories",value:"category",width:"135"}),!a||!a.months||a.months.length<=0?o.monthTable.forEach((function(e){n.push({text:e.monthKey,value:e.monthKey,width:"80"})})):a.months.forEach((function(e){n.push({text:e,value:e,width:"80"})}));var l=Object.assign({},a),s=Ae(l);return o.bill.forEach((function(e){var t=e.monthKey;if(Oe(e,s)){var r,a=i.findIndex((function(t){return t.category===e.category}));if(a>=0)i[a][t]?i[a][t]=we.add(i[a][t],e.amount):i[a][t]=e.amount;else i.push((r={category:e.category},Object(Le["a"])(r,t,e.amount),Object(Le["a"])(r,"type",e.type),r))}})),{dataList:i,headers:n}}},getCsvLedgerIndex:function(e){return function(t){var r=t.csvId,a=t.item,i=Ve(e,r);return i?i.bill.indexOf(a):-1}},getCategoryNameById:function(e){return function(t){var r=t.id,a=t.categoryId,i=Ve(e,r),n="";return i.category.some((function(e){if(e.id===a)return n=e.name,!0})),n}},getMonthkeys:function(e){return function(t){var r=t.id,a=[];if(!r||r<0)return a;var i=Ve(e,r);return i&&i.monthTable?(i.monthTable.forEach((function(e){a.push(e.monthKey)})),a):a}},categoryTable:function(e){return function(t){var r=t.id;if(!r||r<0)return[];var a=Ve(e,r);return a?a.category:[]}}},mutations:{shiftSnackBarQue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e.snackBarQue.length>=t&&e.snackBarQue.shift()},pushToSnackBarQue:function(e,t){var r=t.text,a=t.color,i=void 0===a?"info":a,n=t.isShow,o=void 0===n||n;e.snackBarQue.push({id:Date.now(),text:r,color:i,isShow:o})},hideSnackBarQueItem:function(e,t){var r=t.id,a=e.snackBarQue.findIndex((function(e){if(e.id===r)return!0}));a>=0&&(e.snackBarQue[a].isShow=!1)},pushCsvToLedgers:function(e,t){var r=t.csvBill,a=void 0===r?[]:r,i=t.csvCategory,n=t.id;a.map((function(e){je(e)})),a.forEach((function(e){"0"===e.type?(e.amount=we.sub(we.parseIntAmount(0),we.parseIntAmount(e.amount)),e.category||(e.category="others-out")):(e.amount=we.parseIntAmount(e.amount),e.category||(e.category="others-in"))})),i.push({id:"others-in",name:"Others(Income)",type:"1"}),i.push({id:"others-out",name:"Others(Expenses)",type:"0"}),e.csvLedgers.push({id:n,bill:a,category:i,monthTable:new Array})},pushFilteredLedgerToTable:function(e,t){var r=t.nextTableId,a=t.tableId,i=void 0===a?null:a,n=t.csvId,o=t.isSource,l=void 0!==o&&o,s=t.filters,c=void 0===s?{months:[],categories:[]}:s,d=-1;i&&(d=e.tableLedgers.findIndex((function(e){return e.id===i})));var u=Object.assign({},c),m={id:r,csvId:n,filters:u,isSource:l};d>=0?e.tableLedgers.splice(d+1,0,m):e.tableLedgers.push(m)},removeFilteredLedgerFromTable:function(e,t){var r=t.index;e.tableLedgers.splice(r,1)},removeAllFilteredLedgerFromTable:function(e,t){for(var r=t.csvId,a=e.tableLedgers.length-1;a>=0;a--)e.tableLedgers[a].csvId===r&&e.tableLedgers.splice(a,1)},removeCsvLedger:function(e,t){var r=t.index;e.csvLedgers.splice(r,1)},updateTableLedgerFilter:function(e,t){var r=t.tableLedger,a=t.filters;r.filters=a},setCounter:function(e,t){var r=t.counterName,a=t.id;e.counters[r]=a},updateCsvLedgersBill:function(e,t){var r=t.ledger,a=t.editedIndex,i=t.item;Object.assign(r.bill[a],i)},spliceCsvLedgersBill:function(e,t){var r=t.ledger,a=t.index;r.bill.splice(a,1)},pushCsvLedgersBill:function(e,t){var r=t.ledger,a=t.item,i=Object.assign({},a);je(i),r.bill.push(i)},setMonthTable:function(e,t){var r=t.ledger;r.bill.forEach((function(e){var t={year:e.year,month:e.month,monthKey:e.monthKey};e.month&&e.year&&r.monthTable.findIndex((function(t){return t.year===e.year&&t.month===e.month}))<0&&r.monthTable.push(t)}))}},actions:{addDataToLedger:function(e,t){var r=e.state,a=e.commit,i=t.csvBill,n=t.csvCategory,o=r.counters["csvId"]+1;a("setCounter",{counterName:"csvId",id:o}),a("pushCsvToLedgers",{csvBill:i,csvCategory:n,id:o});var l=Ve(r,o);l&&a("setMonthTable",{ledger:l});var s=r.counters["tableId"]+1;a("setCounter",{counterName:"tableId",id:s}),a("pushFilteredLedgerToTable",{csvId:o,nextTableId:s,isSource:!0})},applyLedgerFilter:function(e,t){var r=e.state,a=e.commit,i=t.id,n=t.filters,o=r.tableLedgers.find((function(e){return e.id===i})),l=Object.assign({},n);o?a("updateTableLedgerFilter",{tableLedger:o,filters:l}):a("pushToSnackBarQue",{text:"Filter setting failed",color:"error"})},editBillItem:function(e,t){var r=e.state,a=e.commit,i=t.id,n=t.editedIndex,o=t.item,l=Ve(r,i);l?(a("updateCsvLedgersBill",{ledger:l,editedIndex:n,item:o}),a("setMonthTable",{ledger:l}),a("pushToSnackBarQue",{text:"Bill Editing completed",color:"success"})):a("pushToSnackBarQue",{text:"Bill Editing failed",color:"error"})},deleteBillItem:function(e,t){var r=e.state,a=e.commit,i=t.id,n=t.index,o=Ve(r,i);o?(a("spliceCsvLedgersBill",{ledger:o,index:n}),a("setMonthTable",{ledger:o}),a("pushToSnackBarQue",{text:"Bill removing  completed",color:"success"})):a("pushToSnackBarQue",{text:"Bill removing failed",color:"error"})},addBillItem:function(e,t){var r=e.state,a=e.commit,i=t.id,n=t.item,o=Ve(r,i);o?(a("pushCsvLedgersBill",{ledger:o,item:n}),a("setMonthTable",{ledger:o}),a("pushToSnackBarQue",{text:"Bill adding completed",color:"success"})):a("pushToSnackBarQue",{text:"Bill adding failed",color:"error"})},forkTableLedger:function(e,t){var r=e.state,a=e.commit,i=t.csvId,n=t.tableId,o=t.filters,l=r.counters["tableId"]+1;a("setCounter",{counterName:"tableId",id:l}),a("pushFilteredLedgerToTable",{csvId:i,nextTableId:l,tableId:n,isSource:!1,filters:o})},removeAllLedger:function(e,t){var r=e.state,a=e.commit,i=t.csvId;a("removeAllFilteredLedgerFromTable",{csvId:i});var n=r.csvLedgers.findIndex((function(e){return e.id===i}));n>=0?(a("removeCsvLedger",{index:n}),a("pushToSnackBarQue",{text:"Ledgers Removing completed",color:"success"})):a("pushToSnackBarQue",{text:"Ledgers Removing failed",color:"error"})},removeLedger:function(e,t){var r=e.state,a=e.commit,i=t.id,n=r.tableLedgers.findIndex((function(e){return e.id===i}));n>=0?(a("removeFilteredLedgerFromTable",{index:n}),a("pushToSnackBarQue",{text:"Ledger removing completed",color:"success"})):a("pushToSnackBarQue",{text:"Ledger Removing failed",color:"error"})},notify:function(e,t){var r=e.commit,a=t.text,i=t.color;r("shiftSnackBarQue"),r("pushToSnackBarQue",{text:a,color:i})},notificationHide:function(e,t){var r=e.commit,a=t.id;r("hideSnackBarQueItem",{id:a})}}}),$e=r("f309");a["a"].use($e["a"]);var Qe=new $e["a"]({}),Pe=Qe,Me={millisTimeFormat:function(e){var t=new Date(parseInt(e));return t.toLocaleDateString("en",{year:"numeric",month:"numeric",day:"numeric"})+" "+t.toLocaleTimeString("en-GB")},tableAmountFormat:function(e){return we.intAmountFormat(e)},tableTypeNamePrefix:function(e,t){return"0"==t?"Expenses: "+e:"Income: "+e}};a["a"].config.productionTip=!1,Se["a"].globalLocale=we.locale.code,Se["a"].defaultCurrency=we.locale.CurrencyCode,Se["a"].defaultPrecision=we.locale.precision,Object.keys(Me).forEach((function(e){a["a"].filter(e,Me[e])})),a["a"].prototype.$currency=we,new a["a"]({store:Ee,vuetify:Pe,filters:Me,render:function(e){return e(Te)}}).$mount("#app")},"8a23":function(e,t,r){}});
//# sourceMappingURL=app.5edbdf2a.js.map